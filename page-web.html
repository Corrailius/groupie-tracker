<!DOCTYPE html>
<html>
<head>
<title>Groupie Tracker</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/page-Style.css">

</head>

<body>
<header>
  <h1>Groupie Trackers</h1>
  <p>Liste de 52 artistes majeurs de la musique moderne.</p>
</header>

<div class="navbar">
  <a href="https://groupietrackers.herokuapp.com/api/artists">Artiste</a>
  <a href="https://groupietrackers.herokuapp.com/api/locations">locations</a>
  <a href="https://groupietrackers.herokuapp.com/api/dates">Date</a>
  <a href="https://groupietrackers.herokuapp.com/api/relation">relation</a>
</div>

<div class="container">
  <div class="side">
    <h2>Trie :</h2>
    <button onclick="sortArtists()">Ordre Alphabetique </button><br>
    <button onclick="sortArtistsByCreationDate()">Date de Création</button><br>
    <button onclick="premierAlbum()">Premier Album</button><br>
    <button onclick="numberMenber()">Nombre de Membres</button>
  </div>
<div class="main">
  <h2>Liste des artistes</h2>
  <h5>⚠️ Si les artiste ne s'affichent pas, veuillez rafraîchir la page.</h5>
  <div id="artist-box">
    <div id="api-content" style="padding:10px; border:1px solid #ccc;">
    <script>
    let allArtists = [];

    function displayArtists(artists) {
      const container = document.getElementById('api-content');
      container.innerHTML = "";

      artists.forEach(artist => {
        const div = document.createElement('div');
        div.style.border = "1px solid #ccc";
        div.style.margin = "5px";
        div.style.padding = "5px";
        div.style.display = "flex";
        div.style.alignItems = "center";
        div.style.gap = "10px";

        div.innerHTML = `
          <img src="${artist.image}" alt="${artist.name}" style="width:50px;height:50px;object-fit:cover;">
          <div>
            <strong>${artist.name}</strong><br>
            Premier album: ${artist.firstAlbum}<br>
            Création: ${artist.creationDate}<br>
            Membres: ${artist.members.join(", ")}<br>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function sortArtists() {
      const sorted = [...allArtists].sort((a, b) => a.name.localeCompare(b.name));
      displayArtists(sorted);
    }

    function sortArtistsByCreationDate() {
      const sorted = [...allArtists].sort((a, b) => a.creationDate - b.creationDate);
      displayArtists(sorted);
    }

    function premierAlbum() {
      const sorted = [...allArtists].sort((a, b) => {
      const dateA = new Date(a.firstAlbum.substring(6, 10), a.firstAlbum.substring(3, 5) - 1, a.firstAlbum.substring(0, 2));
      const dateB = new Date(b.firstAlbum.substring(6, 10), b.firstAlbum.substring(3, 5) - 1, b.firstAlbum.substring(0, 2));
      return dateA - dateB;
      });
      displayArtists(sorted);
    }
    function numberMenber() {
      const sorted = [...allArtists].sort((a, b) => b.members.length - a.members.length);
      displayArtists(sorted);
    }



    fetch('/api/artists')
      .then(response => response.json())
      .then(data => {
        allArtists = data;
        displayArtists(allArtists);
      })
      .catch(err => {
        document.getElementById('api-content').textContent = "Erreur de chargement : " + err;
      });
    </script>

    </div>
  </div>
  <p>Some text..</p>
  <p>Sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>

  <br>
</div>

</div>

<footer>
  <h2>Credit: </h2>
  <list>
    <li>evann-g</li>
    <li>shap</li>
    <li>Corrailius</li>
  </list>
</footer>

</body>

</html>
